ns.Text=function(e,t,i,r){this.field=t,this.value=i,this.setValue=r,this.changeCallbacks=[]},ns.Text.prototype.appendTo=function(e){var t=this;this.$item=ns.$(this.createHtml()).appendTo(e),this.$input=this.$item.find("input"),this.$errors=this.$item.children(".h5p-errors"),this.$input.change((function(){var e=t.validate();if(!1!==e){""===H5P.trim(e)?(delete t.value,t.setValue(t.field)):(t.value=e,t.setValue(t.field,ns.htmlspecialchars(e)));for(var i=0;i<t.changeCallbacks.length;i++)t.changeCallbacks[i](e)}}))},ns.Text.prototype.change=function(e){return this.changeCallbacks.push(e),e(),this.changeCallbacks.length-1},ns.Text.prototype.createHtml=function(){const e=ns.getNextFieldId(this.field),t=void 0!==this.field.description?ns.getDescriptionId(e):void 0;var i=ns.createText(this.value,this.field.maxLength,this.field.placeholder,e,t);return ns.createFieldMarkup(this.field,i,e)},ns.Text.prototype.validate=function(){var e=H5P.trim(this.$input.val()),t=!0;return this.$errors.html(""),void 0!==this.field.optional&&this.field.optional||e.length?e.length>this.field.maxLength?(this.$errors.append(ns.createError(ns.t("core","tooLong",{":max":this.field.maxLength}))),t=!1):void 0!==this.field.regexp&&e.length&&!e.match(new RegExp(this.field.regexp.pattern,this.field.regexp.modifiers))&&(this.$errors.append(ns.createError(ns.t("core","invalidFormat"))),t=!1):(this.$errors.append(ns.createError(ns.t("core","requiredProperty",{":property":ns.t("core","textField")}))),t=!1),this.$input.toggleClass("error",!t),ns.checkErrors(this.$errors,this.$input,e)},ns.Text.prototype.remove=function(){this.$item.remove()},ns.Text.prototype.forceValue=function(e){this.$input.val(e).change()},ns.widgets.text=ns.Text;