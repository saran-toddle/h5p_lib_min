var llc=H5PEditor.LibraryListCache={libraryCache:{},librariesComingIn:{},librariesMissing:{},que:[]};llc.getLibraries=function(l,e,r){l=l.map((function(l){return"object"==typeof l?l.name:l}));for(var i=[],a="hasAll",c=0;c<l.length;c++)l[c]in llc.libraryCache?null!==llc.libraryCache[l[c]]&&i.push(llc.libraryCache[l[c]]):l[c]in llc.librariesComingIn?"hasAll"===a&&(a="onTheWay"):(a="requestThem",llc.librariesComingIn[l[c]]=!0);switch(a){case"hasAll":e.call(r,i);break;case"onTheWay":llc.que.push({libraries:l,handler:e,thisArg:r});break;case"requestThem":var n={type:"POST",url:H5PEditor.getAjaxUrl("libraries"),success:function(i){llc.setLibraries(i,l),e.call(r,i),llc.runQue()},data:{libraries:l},dataType:"json"};H5PEditor.$.ajax(n)}},llc.runQue=function(){for(var l=llc.que.length,e=0;e<l;e++){var r=llc.que.shift();llc.getLibraries(r.libraries,r.handler,r.thisArg)}},llc.setLibraries=function(l,e){for(var r=e.slice(),i=0;i<l.length;i++){llc.libraryCache[l[i].uberName]=l[i],l[i].uberName in llc.librariesComingIn&&delete llc.librariesComingIn[l[i].uberName];var a=r.indexOf(l[i].uberName);a>-1&&r.splice(a,1)}for(i=0;i<r.length;i++)llc.libraryCache[r[i]]=null,r[i]in llc.librariesComingIn&&delete llc.librariesComingIn[l[i]]},llc.getDefaultTitle=function(l){var e=llc.libraryCache[l],r=e&&e.title?e.title:"";return H5PEditor.t("core","untitled").replace(":libraryTitle",r)};