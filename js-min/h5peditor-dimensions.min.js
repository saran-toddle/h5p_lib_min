ns.Dimensions=function(t,i,e,s){var n=this;this.parent=t,this.field=i,this.changes=[],H5PEditor.followField(t,i.max,(function(t){n.setMax(t)})),H5PEditor.followField(t,i.default,(function(t){void 0===e.width&&n.setSize(t)})),this.params=e,this.setValue=s,this.params.field&&(this.params.field=void 0)},ns.Dimensions.prototype.setMax=function(t){void 0!==t&&(this.max={width:parseInt(t.width),height:parseInt(t.height)})},ns.Dimensions.prototype.setSize=function(t){if(void 0!==t){this.params={width:parseInt(t.width),height:parseInt(t.height)},this.setValue(this.field,this.params),this.$inputs.filter(":eq(0)").val(t.width).next().val(t.height);for(var i=0;i<this.changes.length;i++)this.changes[i](t.width,t.height)}},ns.Dimensions.prototype.appendTo=function(t){var i=this;this.$item=ns.$(this.createHtml()).appendTo(t),this.$inputs=this.$item.find("input"),this.$errors=this.$item.children(".h5p-errors"),this.$inputs.change((function(){var t=i.validate();if(t){i.params=t,i.setValue(i.field,t);for(var e=0;e<i.changes.length;e++)i.changes[e](t.width,t.height)}})).click((function(){return!1}))},ns.Dimensions.prototype.createHtml=function(){const t=ns.getNextFieldId(this.field),i=void 0!==this.field.description?ns.getDescriptionId(t):void 0;var e=ns.createText(void 0!==this.params?this.params.width:void 0,15,ns.t("core","width"),t,i)+" x "+ns.createText(void 0!==this.params?this.params.height:void 0,15,ns.t("core","height"),void 0,i);return ns.createFieldMarkup(this.field,e,t)},ns.Dimensions.prototype.validate=function(){var t=this,i={};return this.$errors.html(""),this.$inputs.each((function(e){var s=ns.$(this),n=H5P.trim(s.val()),r=e?"height":"width",o=ns.t("core",r);return void 0!==t.field.optional&&t.field.optional||n.length?n.match(new RegExp("^[0-9]+$"))?(n=parseInt(n),void 0!==t.max&&n>t.max[r]?(t.$errors.append(ns.createError(ns.t("core","exceedsMax",{":property":o,":max":t.max[r]}))),!1):void(i[r]=n)):(t.$errors.append(ns.createError(ns.t("core","onlyNumbers",{":property":o}))),!1):(t.$errors.append(ns.createError(ns.t("core","requiredProperty",{":property":o}))),!1)})),ns.checkErrors(this.$errors,this.$inputs,i)},ns.Dimensions.prototype.remove=function(){this.$item.remove()},ns.widgets.dimensions=ns.Dimensions;