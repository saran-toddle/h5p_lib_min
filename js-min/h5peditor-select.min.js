H5PEditor.widgets.select=H5PEditor.Select=function(e){function t(e,t,i,r){this.field=t,this.value=i,this.setValue=r,this.changes=[],this.triggerListeners=function(e){for(var t=0;t<this.changes.length;t++)this.changes[t](e)}}return t.prototype.appendTo=function(t){var i=this;this.$item=e.$(this.createHtml()).appendTo(t),this.$select=this.$item.find("select"),this.$errors=this.$item.children(".h5p-errors"),this.$select.change((function(){var e=i.validate();!1!==e&&(i.value=e,i.setValue(i.field,e),i.triggerListeners(e))}))},t.prototype.createHtml=function(){const i=ns.getNextFieldId(this.field);let r="";!0!==this.field.optional&&void 0!==this.field.default||(r=e.createOption("-","-")),r+=t.createOptionsHtml(this.field.options,this.value);let s='<select id="'+i+'"';return void 0!==this.field.description&&(s+=' aria-describedby="'+ns.getDescriptionId(i)+'"'),s+=' class="h5peditor-select">'+r+"</select>",e.createFieldMarkup(this.field,s,i)},t.createOptionsHtml=function(i,r){for(var s="",o=0;o<i.length;o++)"optgroup"===i[o].type?(s+='<optgroup label="'+i[o].label+'" >',s+=t.createOptionsHtml(i[o].options,r),s+="</optgroup>"):s+=e.createOption(i[o].value,i[o].label,i[o].value===r);return s},t.prototype.validate=function(){var e=this.$select.val();if("-"===e&&(e=void 0),!0!==this.field.optional&&void 0===e)return this.$errors.append(ns.createError(ns.t("core","requiredProperty",{":property":ns.t("core","textField")}))),!1;var t=this.$errors.children();return t.length&&t.remove(),e},t.prototype.remove=function(){this.$item.remove()},t}(H5PEditor);