ns.Coordinates=function(e,t,i,s){var n=this;this.parent=e,this.field=H5P.cloneObject(t,!0),this.findImageField("max",(function(e){e instanceof ns.File?(void 0!==e.params&&n.setMax(e.params.width,e.params.height),e.changes.push((function(e){void 0!==e&&n.setMax(e.params.width,e.params.height)}))):e instanceof ns.Dimensions&&(void 0!==e.params&&n.setMax(e.params.width,e.params.height),e.changes.push((function(e,t){n.setMax(e,t)})))})),this.params=i,this.setValue=s},ns.Coordinates.prototype.setMax=function(e,t){this.field.max={x:parseInt(e),y:parseInt(t)},void 0!==this.params&&(this.$errors.html(""),this.validate())},ns.Coordinates.prototype.findImageField=function(e,t){var i=this,s="string";typeof this.field[e]===s&&this.parent.ready((function(){if(typeof i.field[e]===s){var n=i.field[e];if(i.field[e]=ns.findField(i.field[e],i.parent),!i.field[e])throw ns.t("core","unknownFieldPath",{":path":n});if("image"!==i.field[e].field.type&&"dimensions"!==i.field[e].field.widget)throw ns.t("core","notImageOrDimensionsField",{":path":n});t(i.field[e])}else void 0!==i.field[e]&&t(i.field[e])}))},ns.Coordinates.prototype.appendTo=function(e){var t=this;this.$item=ns.$(this.createHtml()).appendTo(e),this.$inputs=this.$item.find("input"),this.$errors=this.$item.children(".h5p-errors"),this.$inputs.change((function(){var e=t.validate();e&&(t.params=e,t.setValue(t.field,e))})).click((function(){return!1})).click((function(){return!1}))},ns.Coordinates.prototype.createHtml=function(){const e=ns.getNextFieldId(this.field),t=void 0!==this.field.description?ns.getDescriptionId(e):void 0;var i=ns.createText(void 0!==this.params?this.params.x:void 0,15,"X",e,t)+" , "+ns.createText(void 0!==this.params?this.params.y:void 0,15,"Y",void 0,t);return ns.createFieldMarkup(this.field,i,e)},ns.Coordinates.prototype.validate=function(){var e=this,t={};return this.$inputs.each((function(i){var s=ns.$(this),n=H5P.trim(s.val()),r=i?"y":"x";return!(!e.field.optional||n.length)||(void 0!==e.field.optional&&e.field.optional||n.length?n.length&&!n.match(new RegExp("^[0-9]+$"))?(e.$errors.append(ns.createError(ns.t("core","onlyNumbers",{":property":r}))),!1):(n=parseInt(n),void 0!==e.field.max&&n>e.field.max[r]?(e.$errors.append(ns.createError(ns.t("core","exceedsMax",{":property":r,":max":e.field.max[r]}))),!1):void(t[r]=n)):(e.$errors.append(ns.createError(ns.t("core","requiredProperty",{":property":r}))),!1))})),ns.checkErrors(this.$errors,this.$inputs,t)},ns.Coordinates.prototype.remove=function(){this.$item.remove()},ns.widgets.coordinates=ns.Coordinates;