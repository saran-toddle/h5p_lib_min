H5PEditor.SemanticStructure=function(e){function t(t,o){var n=this;H5P.EventDispatcher.call(n),n.label=void 0===t.label?t.name:t.label,n.field={};const d=H5PEditor.getNextFieldId(t),a=void 0!==t.description?H5PEditor.getDescriptionId(d):void 0;var p,l,c,s,u,g,h=function(t,r){var o=e("<li/>",{class:"h5peditor-widget-option"+(r?" "+i:""),text:t.label,role:"button",tabIndex:1,on:{click:function(){p.children("."+i).removeClass(i),o.addClass(i),w(t.name)}}}).appendTo(p)},v=function(){if(void 0===t.widgets)return[o];if(!(t.widgets instanceof Array))throw TypeError("widgets must be an array");for(var e=[],r=0;r<t.widgets.length;r++){var i=t.widgets[r];f(i.name)&&e.push(i)}return e.length||e.push(n.default),e},f=function(e){return H5PEditor[e]},w=function(e){void 0!==n.widget&&(n.validate(),n.widget.remove());var t=f(e);n.widget=new t(n),n.trigger("changeWidget"),n.widget.appendTo(c),s.appendTo(c),void 0!==n.widget.helpText?u.html(n.widget.helpText).appendTo(c):u.detach()};n.appendTo=function(e){w(g[0].name),l.appendTo(e)},n.remove=function(){n.widget.remove(),l.remove()},n.setError=function(e){s.append(H5PEditor.createError(e))},n.clearErrors=function(){s.html("")},n.getName=function(){return t.name},n.getId=function(){return d},n.getDescriptionId=function(){return a},function(){var i;if(l=e("<div/>",{class:"field "+t.type+" "+H5PEditor.createImportance(t.importance)}),0!==t.label&&r(n.label,t.optional,d).appendTo(l),void 0!==t.description&&(i=e("<div/>",{id:a,class:"h5peditor-field-description",text:t.description,appendTo:l})).html(i.html().replace("\n","<br/>")),(g=v()).length>1){p=e("<ul/>",{class:"h5peditor-widget-select",title:H5PEditor.t("core","editMode"),appendTo:l});for(var o=0;o<g.length;o++)h(g[o],0===o);l.addClass("h5peditor-widgets")}c=e("<div/>",{class:"h5peditor-widget-wrapper"+(g.length>1?" content":" "),appendTo:l}),s=e("<div/>",{class:"h5p-errors"}),u=e("<div/>",{class:"h5p-help-text"})}()}t.prototype=Object.create(H5P.EventDispatcher.prototype),t.prototype.constructor=t;var r=function(t,r,i){return e("<label/>",{for:i,class:"h5peditor-label"+(r?"":" h5peditor-required"),text:t})},i="h5peditor-widget-active";return t}(H5P.jQuery);