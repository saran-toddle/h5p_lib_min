H5P.ConfirmationDialog=function(e){"use strict";function t(t){e.call(this);var i=this;H5P.ConfirmationDialog.uniqueId+=1;var n=H5P.ConfirmationDialog.uniqueId;function a(e){i.hide(),i.trigger("confirmed"),e.preventDefault()}function o(e){i.hide(),i.trigger("canceled"),e.preventDefault()}function d(e,t){e.focus(),t.preventDefault()}(t=t||{}).headerText=t.headerText||H5P.t("confirmDialogHeader"),t.dialogText=t.dialogText||H5P.t("confirmDialogBody"),t.cancelText=t.cancelText||H5P.t("cancelLabel"),t.confirmText=t.confirmText||H5P.t("confirmLabel");var r=!1,c=document.createElement("div");c.classList.add("h5p-confirmation-dialog-background","hidden","hiding");var s=document.createElement("div");s.classList.add("h5p-confirmation-dialog-popup","hidden"),t.classes&&t.classes.forEach((function(e){s.classList.add(e)})),s.setAttribute("role","dialog"),s.setAttribute("aria-labelledby","h5p-confirmation-dialog-dialog-text-"+n),c.appendChild(s),s.addEventListener("keydown",(function(e){27===e.which&&o(e)}));var l=document.createElement("div");l.classList.add("h5p-confirmation-dialog-header"),s.appendChild(l);var h=document.createElement("div");h.classList.add("h5p-confirmation-dialog-header-text"),h.innerHTML=t.headerText,l.appendChild(h);var u=document.createElement("div");u.classList.add("h5p-confirmation-dialog-body"),s.appendChild(u);var f=document.createElement("div");f.classList.add("h5p-confirmation-dialog-text"),f.innerHTML=t.dialogText,f.id="h5p-confirmation-dialog-dialog-text-"+n,u.appendChild(f);var m=document.createElement("div");m.classList.add("h5p-confirmation-dialog-buttons"),u.appendChild(m);var p=document.createElement("button");p.classList.add("h5p-core-cancel-button"),p.textContent=t.cancelText;var v=document.createElement("button");v.classList.add("h5p-core-button"),v.classList.add("h5p-confirmation-dialog-confirm-button"),v.textContent=t.confirmText;var g,L,b=document.createElement("button");b.classList.add("h5p-confirmation-dialog-exit"),b.setAttribute("aria-hidden","true"),b.tabIndex=-1,b.title=t.cancelText,p.addEventListener("click",o),p.addEventListener("keydown",(function(e){32===e.which?o(e):9===e.which&&e.shiftKey&&d(v,e)})),t.hideCancel?m.classList.add("center"):m.appendChild(p),v.addEventListener("click",a),v.addEventListener("keydown",(function(e){if(32===e.which)a(e);else if(9===e.which&&!e.shiftKey){d(t.hideCancel?v:p,e)}})),m.appendChild(v),b.addEventListener("click",o),b.addEventListener("keydown",(function(e){32===e.which&&o(e)})),t.hideExit||s.appendChild(b);var x,E=[],H=[];this.appendTo=function(e){return g=e,this};var y=function(e){c.contains(e.target)||(e.preventDefault(),v.focus())},C=function(e){var t,i=[],n=e.parentNode.children;for(t=0;t<n.length;t+=1)i[t]=!!n[t].getAttribute("aria-hidden"),n[t]!==e&&n[t].setAttribute("aria-hidden",!0);return i},T=function(e,t){var i,n=e.parentNode.children;for(i=0;i<n.length;i+=1)n[i]===e||t[i]||n[i].removeAttribute("aria-hidden")};this.show=function(e){return x=document.activeElement,g.appendChild(c),(L=g.parentNode||g).addEventListener("focus",y,!0),E=C(g),H=C(c),c.classList.remove("hidden"),function(e){var t=parseInt(s.style.top,10);void 0!==e&&(t=e),t||(t=0),t+s.offsetHeight>g.offsetHeight&&(t=g.offsetHeight-s.offsetHeight-8),t-32<=0&&(t=40,r=!0),s.style.top=t+"px"}(e),setTimeout((function(){s.classList.remove("hidden"),c.classList.remove("hiding"),setTimeout((function(){if(v.focus(),r&&t.instance){var e=parseInt(s.offsetHeight,10)+32+16;i.setViewPortMinimumHeight(e),t.instance.trigger("resize"),r=!1}}),100)}),0),this},this.hide=function(){return c.classList.add("hiding"),s.classList.add("hidden"),L.removeAttribute("aria-hidden"),L.removeEventListener("focus",y,!0),t.skipRestoreFocus||x.focus(),T(g,E),T(c,H),setTimeout((function(){c.classList.add("hidden"),g.removeChild(c),i.setViewPortMinimumHeight(null)}),100),this},this.getElement=function(){return s},this.getPreviouslyFocused=function(){return x},this.setViewPortMinimumHeight=function(e){(document.querySelector(".h5p-container")||document.body).style.minHeight="number"==typeof e?e+"px":e}}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t}(H5P.EventDispatcher),H5P.ConfirmationDialog.uniqueId=-1;