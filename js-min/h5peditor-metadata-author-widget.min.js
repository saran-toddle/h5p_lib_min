H5PEditor.metadataAuthorWidget=function(t,a,o,n){a.authors||(a.authors=[]);const r=H5PEditor.$,i=r('<div class="field h5p-metadata-author-widget"></div>');var e=r('<div class="h5p-author-data"></div>');i.append(e),H5PEditor.processSemanticsChunk(t,{},e,n);var d=H5PEditor.findField("name",n),u=H5PEditor.findField("role",n),l=r('<div class="field authorList"><button type="button" class="h5p-metadata-button inverted h5p-save-author">'+H5PEditor.t("core","addAuthor")+"</button></div>").children("button").click((function(t){d.field.optional=!1;var o=d.validate();d.field.optional=!0;var n=u.validate();if(!o)return;a.authors.some((function(t){return t.name===o&&t.role===n}))?c():s(o,n)})).end();e.append(l);var p=r('<div class="h5p-author-list-wrapper"><ul class="h5p-author-list"></ul></div>');function s(t,o){a.authors.push({name:t,role:o}),h(),c()}function c(){d.$input.val("")}function h(){var t=i.find(".h5p-author-list-wrapper");t.empty();const o=r("<ul></ul>");a.authors.forEach((function(t){var n=r("<li>",{html:H5PEditor.htmlspecialchars(t.name),append:r("<span>",{class:"h5p-metadata-role",html:t.role})});r("<button>",{type:"button",class:"h5p-metadata-icon-button",click:function(){confirm(H5PEditor.t("core","confirmRemoveAuthor"))&&function(t){a.authors=a.authors.filter((function(a){return a!==t})),h()}(t)}}).appendTo(n),o.append(n)})),t.append(o)}return i.append(p),h(),i.appendTo(o),{addAuthor:s,addDefaultAuthor:function(t,a){var o=d.validate();o||(o=t);var n=u.validate();n||(n=a),s(o,n)}}};